package com.chinaops.web.agent.dao;

import java.util.List;

import com.chinaops.web.agent.base.GenericHibernateDao;
import com.chinaops.web.agent.entity.File;
import com.chinaops.web.agent.entity.Page;

public class FileDaoImpl extends GenericHibernateDao<File>{
	/**
	 * Description: 获取所有file
	 * @Version 1.0 2013-8-20 上午10:05:57崔万哲(cuiwanzhe@china-ops.com) 创建
	 * @return
	 */
	public List<File> getAllFiles(){
		return this.find("from File order by id desc");
	}
	
	/**
	 * Description: 根据操作系统类型和位数来查询file
	 * @Version 1.0 2013-8-20 上午10:06:13崔万哲(cuiwanzhe@china-ops.com) 创建
	 * @param ostype
	 * @param arch
	 * @return
	 */
	public List<File> getFilesByOstypeArch(String ostype, String arch){
		return this.find("from File where ostype=? and arch=?",new Object[]{ostype,arch});
	}
	
	/**
	 * Description: 分页查询
	 * @Version 1.0 2013-8-27 下午04:24:52崔万哲(cuiwanzhe@china-ops.com) 创建
	 * @param ostype
	 * @param arch
	 * @param pageNo
	 * @param pageSize
	 * @return
	 */
	public Page getFilesByPage(String ostype, String arch,String status,int pageNo,int pageSize){
		String sql_where = "";
		if(ostype.equals("0")&&!arch.equals("0")&&!status.equals("00")){
			sql_where = "from File where arch='" + arch + "' and status='" + status + "' order by id desc";
		}else if(arch.equals("0")&&!ostype.equals("0")&&!status.equals("00")){
			sql_where = "from File where ostype='" + ostype + "' and status='" +status+ "' order by id desc";
		}else if(status.equals("00")&&!ostype.equals("0")&&!arch.equals("0")){
			sql_where = "from File where ostype='" + ostype + "' and arch='" + arch + "' order by id desc";
		}else if(ostype.equals("0")&&arch.equals("0")&&status.equals("00")){
			sql_where = "from File order by id desc";
		}else if(!ostype.equals("0")&&arch.equals("0")&&status.equals("00")){
			sql_where = "from File where ostype='" + ostype + "' order by id desc";
		}else if(ostype.equals("0")&&!arch.equals("0")&&status.equals("00")){
			sql_where = "from File where arch='" + arch + "' order by id desc";
		}else if(ostype.equals("0")&&arch.equals("0")&&!status.equals("00")){
			sql_where = "from File where status='" +status+ "' order by id desc";
		}else{
			sql_where = "from File where ostype='" + ostype + "' and arch='" + arch + "' and status='"+status+"' order by id desc";
		}
		return super.findByPage(sql_where,pageNo, pageSize);
	}
	
	/**
	 * Description: 根据id删除
	 * @Version 1.0 2013-8-20 上午10:19:32崔万哲(cuiwanzhe@china-ops.com) 创建
	 * @param id
	 */
	public void deleteFile(Integer id){
		this.executeUpdate("delete from File where id=?", id);
	}
}
